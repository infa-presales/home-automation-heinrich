mqtt:
  switch:
    - name: "Heizungssperre"
      unique_id: "Heizungssperre"
      state_topic: "shellies/Wohnhaus/Heizungssperre/relay/0"
      command_topic: "shellies/Wohnhaus/Heizungssperre/relay/0/command"
      payload_on: "on"
      payload_off: "off"
      state_on: "on"
      state_off: "off"
      qos: 1
      retain: false

  sensor:
    - name: "WPW Debug Raw Message"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value }}"    
      
    - name: "Ölheizung Brennerstatus (Text)"
      state_topic: "SmartHome/Keller/TEMP_KESSEL/tele/SENSOR"
      value_template: "{{ value_json.Switch1 }}"
      icon: mdi:fire

    - name: "Ölheizung Brennerstatus (Numerisch)"
      state_topic: "SmartHome/Keller/TEMP_KESSEL/tele/SENSOR"
      value_template: >
        {% if value_json.Switch1 == "ON" %}
          1
        {% else %}
          0
        {% endif %}
      icon: mdi:fire
    #      unit_of_measurement: "1/0)"
    #      device_class: power

      # Also get Shelly data
    - name: "WPW Total AC Power Consumption (Shelly)"
      state_topic: "SmartHome/Wohnhaus/Shelly-WP-Wohnhaus/events/rpc"
      value_template: "{{ value_json['params']['em:0']['total_act_power'] | round(0) }}"
      unit_of_measurement: "W"

      # Get all data from WPW related phython script
    - name: "WPW Timestamp"
      state_topic: "WP/status/Wohnhaus"
      value_template: >
        {{ (value_json.LocalTimestamp.epoch | int) | timestamp_local }}
      device_class: "timestamp"

    - name: "WPW Ambient Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['AmbientTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Inlet Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['InletTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Outlet Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutletTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Hotwater Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['HotwaterTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Return Gas Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['ReturnGasTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Coil Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CoilTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Exhaust Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['ExhaustTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Evaporation Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['EvaporationTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Condensation Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CondensationTemp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Pump Flow"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ (value_json['PumpFlow']['value'] / 100.0)}}"
      unit_of_measurement: "m³/h"

    - name: "WPW DC Pump Speed"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DCPumpSpeed']['value'] }}"
      unit_of_measurement: "RPM"

    - name: "WPW Heating Capacity"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['HeatingCapacity']['value'] }}"
      unit_of_measurement: "W"

    - name: "WPW DC Bus Voltage"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DcBusVoltage']['value'] }}"
      unit_of_measurement: "V"

    - name: "WPW DC Fan1 Speed"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DcFan1Speed']['value'] }}"
      unit_of_measurement: "RPM"

    - name: "WPW DC Fan2 Speed"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DcFan2Speed']['value'] }}"
      unit_of_measurement: "RPM"

    - name: "WPW DC Fan Target"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DcFanTarget']['value'] }}"
      unit_of_measurement: "RPM"

    - name: "WPW Suct Pressure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SuctPressure']['value'] }}"
      unit_of_measurement: "bar"

    - name: "WPW Disch Pressure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DischPressure']['value'] }}"
      unit_of_measurement: "bar"

    - name: "WPW COP"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['COP']['value'] }}"
      unit_of_measurement: ""
      state_class: measurement

    - name: "WPW AC Voltage"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['AcVoltage']['value'] }}"
      unit_of_measurement: "V"

    - name: "WPW AC Current"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['AcCurrent']['value'] }}"
      unit_of_measurement: "A"

    - name: "WPW EEV1 Step"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['Eev1Step']['value'] }}"
      unit_of_measurement: "Steps"

    - name: "WPW EEV2 Step"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['Eev2Step']['value'] }}"
      unit_of_measurement: "Steps"

    - name: "WPW Compresser Current"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CompCurrent']['value'] }}"
      unit_of_measurement: "A"

    - name: "WPW Target Frequency"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['TargetFrequency']['value'] }}"
      unit_of_measurement: "Hz"

    - name: "WPW Compressor Frequency"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CompFrequency']['value'] }}"
      unit_of_measurement: "Hz"

    - name: "WPW AC Power (computed)"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['AcPowerComputed']['value']| round(0)}}"
      unit_of_measurement: "W"

    - name: "WPW Switching Input End Linkage"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputEndLinkage']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input Emergency"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputEmergency']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input Heating Control"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputHeatingControl']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input Cooling Control"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputCoolingControl']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input Water Flow"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputWaterFlow']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input High Voltage"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputHighVoltage']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW SwitchingInputPhaseSequence"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputPhaseSequence']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input Grid SG Signal"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputGridSGSignal']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Switching Input Grid EUV Signal"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['SwitchingInputGridEUVSignal']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus HotWater Demand"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusHotWaterDemand']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus Heating Demand"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusHeatingDemand']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus With Or Without Heating"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusWithOrWithoutHeating']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus With Or Without Cooling"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusWithOrWithoutCooling']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus Antilegionella On"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusAntilegionellaOn']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus Cooling Demand"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusCoolingDemand']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus Alarm Stop"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusAlarmStop']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW WorkingStatus Defrost"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WorkingStatusDefrost']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol1 Compressor Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol1CompressorStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol1 Switch Off"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol1SwitchOff']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol1 Fan Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol1FanStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol1 4way Valve Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol14wayValveStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol1 High Low Wind Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol1HighLowWindStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol2 Chassis Electric Heating Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol2ChassisElectricHeatingStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol2 Heating Heater Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol2HeatingHeaterStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol2 Three Valve Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol2ThreeValveStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol2 Hotwater Heater Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol2HotwaterHeaterStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol3 End Pump Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol3EndPumpStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol3 Crank Heater Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol3CrankHeaterStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol3 Enhanced Enthalpy Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol3EnhancedEnthalpyStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Output Symbol3 Waterpump Status"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['OutputSymbol3WaterpumpStatus']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW Delta T"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['DeltaT']['value'] }}"
      unit_of_measurement: "K"

    - name: "WPW Heatflow"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['HeatFlow']['value'] }}"
      unit_of_measurement: "W"

    - name: "WPW FS1 Hotwater Temp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS1HotwaterTemp']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS1 Ambient Temp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS1AmbientTemp']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS1 Coil Temp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS1CoilTemp']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    # - name: "WPW FS1 Inlet Temp"
    #   state_topic: "WP/status/Wohnhaus"
    #   value_template: "{{ value_json['FS1InletTemp']['value'] }}"
    #   unit_of_measurement: ""

    - name: "WPW FS1 Outlet Temp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS1OutletTemp']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS1 High Voltage Fault"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS1HighVoltageFault']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS1 PowerFailure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS1PowerFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS2 Water Flow Switch Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS2WaterFlowSwitchFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS2 High Protection Of Heatung Water Outlet"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS2HighProtectionOfHeatungWaterOutlet']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS3 Outlet Gas Temp Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS3OutletGasTempFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS4 Water Inlet Temp Sensor Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS4WaterInletTempSensorFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS4 High Exhaust Temperature Protection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS4HighExhaustTemperatureProtection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS4 Economy Into Temperature Sensor Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS4EconomyIntoTemperatureSensorFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS4 Economy Out Temperature Sensor Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS4EconomyOutTemperatureSensorFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS4 Overcooling Protection OfCooling Outlet Water"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS4OvercoolingProtectionOfCoolingOutletWater']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS4 Return Air Temperature Sensor Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS4ReturnAirTemperatureSensorFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS5 Underpressure Protection Of Low Pressure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS5UnderpressureProtectionOfLowPressure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS5 Overpressure Protection Of High Pressure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS5OverpressureProtectionOfHighPressure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS5 High Protection Of Coil Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS5HighProtectionOfCoilTemperature']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS5 High Pressure Sensor Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS5HighPressureSensorFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS5 Low Pressure Sensor Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS5LowPressureSensorFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS6 Secondary Antifreeze"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS6SecondaryAntifreeze']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS6 Primary Antifreeze"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS6PrimaryAntifreeze']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS7 Low Ring Temperature"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS7LowRingTemperature']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS7 Inverter Module Communication Failure"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS7InverterModuleCommunicationFailure']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS7 DC Fan2 Fault"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS7DCFan2Fault']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW FS7 DC Fan1 Fault"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['FS7DCFan1Fault']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW P03 Temp Diff"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P03TempDiff']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW P05 Temp Diff"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P05TempDiff']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW P04 Hotwater Setp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P04HotwaterSetp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW P02 Cooling Setp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P02CoolingSetp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW P01 Heating Setp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P01HeatingSetp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E01 Economic Heat Ambi1"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E01EconomicHeatAmbi1']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E02 Economic Heat Ambi2"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E02EconomicHeatAmbi2']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E03 Economic Heat Ambi3"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E03EconomicHeatAmbi3']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E04 Economic Heat Ambi4"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E04EconomicHeatAmbi4']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E05 Economic Water Ambi1"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E05EconomicWaterAmbi1']['value'] }}"
      unit_of_measurement: "°c"

    - name: "WPW E06 Economic Water Ambi2"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E06EconomicWaterAmbi2']['value'] }}"
      unit_of_measurement: "°c"

    - name: "WPW E07 Economic Water Ambi3"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E07EconomicWaterAmbi3']['value'] }}"
      unit_of_measurement: "°c"

    - name: "WPW E08 Economic Water Ambi4"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E08EconomicWaterAmbi4']['value'] }}"
      unit_of_measurement: "°c"

    - name: "WPW E09 Economic Cool Ambi1"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E09EconomicCoolAmbi1']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E10 Economic Cool Ambi2"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E10EconomicCoolAmbi2']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E11 Economic Cool Ambi3"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E11EconomicCoolAmbi3']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E12 Economic Cool Ambi4"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E12EconomicCoolAmbi4']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E13 Economic Heat Ambi1"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E13EconomicHeatAmbi1']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E14 Economic Heat Ambi2"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E14EconomicHeatAmbi2']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E15 Economic Heat Ambi3"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E15EconomicHeatAmbi3']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E16 Economic Heat Ambi4"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E16EconomicHeatAmbi4']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E17 Economic Water Temp1"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E17EconomicWaterTemp1']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E18 Economic Water Temp2"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E18EconomicWaterTemp2']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E19 Economic Water Temp3"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E19EconomicWaterTemp3']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E20 Economic Water Temp4"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E20EconomicWaterTemp4']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E21 Economic Cool Temp1"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E21EconomicCoolTemp1']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E22 Economic Cool Temp2"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E22EconomicCoolTemp2']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E23 Economic Cool Temp3"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E23EconomicCoolTemp3']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW E24 Economic Cool Temp4"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['E24EconomicCoolTemp4']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW G08 Comp Delay"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G08CompDelay']['value'] }}"
      unit_of_measurement: "min"

    - name: "WPW G06 Comp Delay"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G06CompDelay']['value'] }}"
      unit_of_measurement: "min"

    - name: "WPW G07 Hotwater Heater Ext."
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G07HotwaterHeaterExt']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW G05 Heating Heater Ext"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G05HeatingHeaterExt']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW G02 Pump Work"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G02PumpWork']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW G03 Start Internal"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G03StartInternal']['value'] }}"
      unit_of_measurement: "min"

    - name: "WPW G04 Delta Temp Set"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G04DeltaTempSet']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW P06 Unit Mode"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P06UnitMode']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW P06 Unit Mode String"
      state_topic: "WP/status/Wohnhaus"
      value_template: >
        {% set unit_modes = { 
          "0": "DWH", 
          "1": "Heating", 
          "2": "Cooling", 
          "3": "Heating and DWH",
          "4": "Cooling and DWH" 
        } %}
        {{ unit_modes[states('sensor.wpw_p06_unit_mode')| string] }}
      unit_of_measurement: ""

    - name: "WPW P07 Fan Mode"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['P07FanMode']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW P07 Fan Mode String"
      state_topic: "WP/status/Wohnhaus"
      value_template: >
        {% set fan_modes = { 
          "0": "NORmal(Turbo)", 
          "1": "ECO", 
          "2": "Night(Sleep)", 
          "3": "Test(HI-COP)" 
        } %}
        {{ fan_modes[states('sensor.wpw_p07_fan_mode')| string] }}

    - name: "WPW G09 Enable Switch"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G09EnableSwitch']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW G10 Ambtemp Switch Setp"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G10AmbtempSwitchSetp']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW G11 Ambtemp Diff"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['G11AmbtempDiff']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Temp Set Point Of Antilegionella"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['TempSetPointOfAntilegionella']['value'] }}"
      unit_of_measurement: "°C"

    - name: "WPW Weekday Of Antilegionella"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['WeekdayOfAntilegionella']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW PMD Switch"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['PMDSwitch']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW PMD Main Valve Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['PMDMainValveSelection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW PMD Manual Frequency Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['PMDManualFrequencySelection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW PMD Auxiliary Valve Initial Opening Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['PMDAuxiliaryValveInitialOpeningSelection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW PMD Expansion Valve Initial Opening Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['PMDExpansionValveInitialOpeningSelection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 Thermostatic Adjustment"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1ThermostaticAdjustment']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 Pressure Sensor Valid"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1PressureSensorValid']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 Cooling Auxiliary Circuit Enable"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1CoolingAuxiliaryCircuitEnable']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 Auxiliary Expansion Valve Mode"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1AuxiliaryExpansionValveMode']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 DC Fan1 Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1DCFan1Selection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 DC Fan2 Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1DCFan2Selection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 Parameter Reset Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1ParameterResetSelection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM1 Lockout Fault Reset Selection"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM1LockoutFaultResetSelection']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 With Or Without Antilegionella"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2WithOrWithoutAntilegionella']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 With Or Without Hot Water"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2WithOrWithoutHotWater']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 Whether The Clock Is At Night"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2WhetherTheClockIsAtNight']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 Load Fast Check Mode"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2LoadFastCheckMode']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 Forced Defrost"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2ForcedDefrost']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 With Or Without Smart Grid"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2WithOrWithoutSmartGrid']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"

    - name: "WPW CM2 Smart Grid With Or Without Electric Heater"
      state_topic: "WP/status/Wohnhaus"
      value_template: "{{ value_json['CM2SmartGridWithOrWithoutElectricHeater']['value'] }}"
      unit_of_measurement: ""
      state_class: "measurement"
  # number:
  #   - name: "WPW Start Timer Of Antilegionella"
  #     state_topic: "WP/status/Wohnhaus"
  #     command_topic: "WP/status/Wohnhaus/StartTimerOfAntilegionella"
  #     value_template: "{{ value_json['StartTimerOfAntilegionella']['value'] }}"
  #     min: 0
  #     max: 23
  #     step: 1
  #     unit_of_measurement: "h"

  #   - name: "WPW End Timer Of Antilegionella"
  #     state_topic: "WP/status/Wohnhaus"
  #     command_topic: "WP/status/Wohnhaus/EndTimerOfAntilegionella"
  #     value_template: "{{ value_json['EndTimerOfAntilegionella']['value'] }}"
  #     min: 0
  #     max: 23
  #     step: 1
  #     unit_of_measurement: "h"

  #   - name: "WPW G02 Pump Work"
  #     state_topic: "WP/status/Wohnhaus/"
  #     command_topic: "WP/status/Wohnhaus/set"
  #     value_template: >
  #       {% set status_map = { 0: 'Interval', 1: 'Normal', 2: 'Demand'} %}
  #       {{ status_map[value_json['G02PumpWork']['value']] }}"
  #     min: 0
  #     max: 2
  #     step: 1

